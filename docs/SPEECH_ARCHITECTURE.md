# Speech Recognition Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STUDENT BROWSER                                 â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    LearningPath Component                        â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Question Type?    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Text Input    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  VoiceInput      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ (Writing)     â”‚    if speaking        â”‚  (Speaking)      â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                    â”‚              â”‚  â”‚
â”‚  â”‚                                                    â”‚              â”‚  â”‚
â”‚  â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚                                         â”‚ useSpeechRecognitionâ”‚  â”‚  â”‚
â”‚  â”‚                                         â”‚     (Hook)          â”‚  â”‚  â”‚
â”‚  â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚                â”‚
â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                              â”‚  Web Speech API      â”‚  â”‚
â”‚                                              â”‚  (Browser Native)    â”‚  â”‚
â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ POST /api/evaluate-speech
                               â”‚ { questionId, transcript }
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SERVER (Node.js/Express)                       â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              /api/evaluate-speech Endpoint                     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  1. Verify JWT Token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Authentication    â”‚    â”‚
â”‚  â”‚  2. Validate transcript                                        â”‚    â”‚
â”‚  â”‚  3. Load question from DB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  MongoDB           â”‚    â”‚
â”‚  â”‚  4. Analyze speech                                             â”‚    â”‚
â”‚  â”‚     â”‚                                                           â”‚    â”‚
â”‚  â”‚     â–¼                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚      NLPService.analyzeSpeech(transcript)              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Fluency Analysis (40%)                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Word count optimal range (30-80)                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Sentence length balance (5-20 words)               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Natural speech patterns                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Vocabulary Analysis (30%)                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Unique word ratio                                  â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Filter common words                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Word diversity score                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Coherence Analysis (30%)                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Sentence count (3-8 optimal)                       â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Sentence structure balance                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Logical flow indicators                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Returns: {                                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    grade: 85,                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    confidence: 0.92,                                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    fluency: 88,                                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    vocabulary: 82,                                     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    coherence: 85,                                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    wordCount: 47,                                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    sentenceCount: 5,                                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    feedback: "Excellent response..."                  â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  }                                                     â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚     â”‚                                                           â”‚    â”‚
â”‚  â”‚     â–¼                                                           â”‚    â”‚
â”‚  â”‚  5. Store Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  ResponseModel        â”‚    â”‚
â”‚  â”‚     - transcript                          {                    â”‚    â”‚
â”‚  â”‚     - isSpeech: true                        userAnswer,        â”‚    â”‚
â”‚  â”‚     - speechMetrics: { fluency, vocab...}   isSpeech,         â”‚    â”‚
â”‚  â”‚                                              speechMetrics,    â”‚    â”‚
â”‚  â”‚  6. Update User Theta â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    timestamp         â”‚    â”‚
â”‚  â”‚     - IRT-based ability adjustment          }                 â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  7. Return evaluation                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Response: {
                             â”‚   newTheta: 0.75,
                             â”‚   correct: true,
                             â”‚   speechEvaluation: {...},
                             â”‚   feedback: "Excellent response..."
                             â”‚ }
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STUDENT BROWSER                                 â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Feedback Display                                â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  âœ… Excellent speaking! Score: 85%                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“Š Speech Analysis                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Fluency: 88% â”‚ Vocab: 82%   â”‚ Coherence:85%â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Words: 47    â”‚ Sentences: 5 â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Excellent response with good fluency and natural         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  structure. Your vocabulary shows variety and your        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  sentences flow well.                                     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


KEY COMPONENTS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Client Side:
â”œâ”€ VoiceInput.jsx            - Microphone UI with controls
â”œâ”€ useSpeechRecognition.js   - Web Speech API wrapper hook
â”œâ”€ LearningPath.jsx          - Question routing (text vs voice)
â””â”€ styles.css                - Speech metrics visualization

Server Side:
â”œâ”€ /api/evaluate-speech      - Speech evaluation endpoint
â”œâ”€ NLPService.analyzeSpeech  - Fluency/vocab/coherence analysis
â”œâ”€ ResponseModel             - Speech data storage
â””â”€ QuestionModel             - Speaking question definitions

External:
â””â”€ Web Speech API            - Browser-native speech recognition


DATA FLOW:
â•â•â•â•â•â•â•â•â•â•

1. Question Load    â†’  Check if question.skill === 'speaking'
2. Render UI        â†’  VoiceInput component if speaking, else text input
3. Record Speech    â†’  Web Speech API â†’ real-time transcription
4. Submit           â†’  POST /api/evaluate-speech with transcript
5. Analyze          â†’  NLPService scores fluency/vocab/coherence
6. Store            â†’  ResponseModel with speechMetrics
7. Update Ability   â†’  User theta adjusted via IRT algorithm
8. Display Feedback â†’  Metrics grid + personalized message


EVALUATION WEIGHTS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Final Grade = (Fluency Ã— 0.4) + (Vocabulary Ã— 0.3) + (Coherence Ã— 0.3)

Fluency (40%):
- Natural speech patterns
- Optimal length: 30-80 words
- Sentence balance: 5-20 words/sentence

Vocabulary (30%):
- Unique word diversity
- Common words filtered
- Word variety ratio

Coherence (30%):
- Sentence count: 3-8 optimal
- Structure balance
- Logical flow
```
